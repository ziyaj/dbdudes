\documentclass{article}
\usepackage{graphicx}
\graphicspath{ {images/} }
\title{Tutorial 10: An Introduction to SQL Server}
\author{
	Jin, Ziyang\\
	\texttt{\# 34893140}\\
	\texttt{f4a0b}
	\and
	Kim, Joon Hyung\\
	\texttt{\# 35183128}\\
	\texttt{l1m8}
}

\begin{document}
	\maketitle

\section{Deliverable 1}

\begin{verbatim}
Table name:   dbo.purchase
Attributes:   pid, cid, iid, day, qty
Primary key:  pid
Foreign Keys: cid REFERENCES dbo.cutomer, iid REFERENCES dbo.item
\end{verbatim}

\section{Deliverable 2}

Theoretically, the first query, which uses the inner join syntax, will keep only 1 copy of the joining attributes. While the second query, which just specifies the join condition, will keep both copies of the joining attributes. However, as a result of SQL Server, these 2 queries both keep only 1 copy of the joining attributes;

\section{Deliverable 3}

\begin{verbatim}
select c.cname
from   customer c, purchase p, item i
where  p.cid = c.cid and i.iid = p.iid 
       and i.iname like '%Chococlate Frog%';
\end{verbatim}

\section{Deliverable 4}
\begin{verbatim}
update purchase
set    qty = 5
where  pid in (select p.pid
               from customer c, purchase p, item i
               where c.cid = p.cid and p.iid = i.iid
                     and c.cname like 'S. Uper'
                     and i.iname like '%Chocolate Frog%');
\end{verbatim}

\section{Deliverable 5}

\begin{verbatim}
delete from purchase
where qty = (select max(p.qty)
             from   purchase p
             where  p.iid = 180);
\end{verbatim}

\noindent before: \\


\noindent after: \\


\section{Deliverable 6}
\begin{verbatim}
delete from item
where iid = 180;
\end{verbatim}

Because the item with iid 180 is referenced by some records in purchase table. If we delete item 180, then the purchase record, which has iid as a foreign key referencing item 180, cannot find the item in the item table, which violates referential integrity. So item 180 cannot be deleted until all the purchase records that reference item 180 are deleted.

\section{Deliverable 7}

capture before recovery: \\


\section{Deliverable 8}

capture during recovery: \\


\section{Deliverable 9}

capture after recovery: \\




\end{document}
